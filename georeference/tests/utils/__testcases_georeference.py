#!/usr/bin/env python
# -*- coding: utf-8 -*-
import os

from georeference.config.paths import PATH_TEST_INPUT_BASE

# Created by jacob.mendt@pikobytes.de on 09.09.21
#
# This file is subject to the terms and conditions defined in file
# "LICENSE", which is part of this source code package

# To run the test cases make sure to download the test tifs first and place them in the directory
# ../__test_data/data_input/
GEOREFERENCE_TESTCASES = [
    {
        "name": "Map: df_dk_0010001_5154_1892.tif (8250x9294), Gcps: 4, Algorithm: Affine, Without clip polygon",
        "algorithm": "affine",
        "clip": None,
        "gcps": [
            {"source": [3195, 3986], "target": [14.42561262705, 51.183689473957]},
            {"source": [5223, 5048], "target": [14.668943094563, 51.101568233786]},
            {"source": [7907, 4149], "target": [14.994077170632, 51.159581323447]},
            {"source": [1665, 1321], "target": [14.246610357359, 51.387001187134]},
        ],
        "srcFile": os.path.join(PATH_TEST_INPUT_BASE, "df_dk_0010001_5154_1892.tif"),
        "srs": "EPSG:4314",
    },
    {
        "name": "Map: df_dk_0010001_5154_1892.tif (8250x9294), Gcps: >80, Algorithm: tps, Without clip polygon",
        "algorithm": "tps",
        "clip": {
            "type": "Polygon",
            "crs": {"type": "name", "properties": {"name": "EPSG:4314"}},
            "coordinates": [
                [
                    [14.663647152, 50.899831878],
                    [14.661734496, 50.799776766],
                    [14.764825271, 50.800276975],
                    [14.766010982, 50.800290519],
                    [14.766134478, 50.790482956],
                    [14.782466163, 50.790564092],
                    [14.782294868, 50.800358076],
                    [14.829388686, 50.80059468],
                    [14.829132978, 50.900185774],
                    [14.829130296, 50.900185774],
                    [14.663647152, 50.899831878],
                ]
            ],
        },
        "gcps": [
            {"source": [6700, 998], "target": [14.809598142072, 50.897193140898]},
            {"source": [6656, 944], "target": [14.808447338463, 50.898010359738]},
            {"source": [6687, 1160], "target": [14.809553411787, 50.894672081543]},
            {"source": [6969, 3160], "target": [14.816612768409, 50.863606051111]},
            {"source": [1907, 1301], "target": [14.690521818997, 50.891860483128]},
            {"source": [4180, 4396], "target": [14.747856876595, 50.843955582846]},
            {"source": [5070, 5489], "target": [14.769772087663, 50.827125251053]},
            {"source": [6933, 7171], "target": [14.816342007402, 50.801483295161]},
            {"source": [3325, 7152], "target": [14.727274235239, 50.801026963158]},
            {"source": [1509, 6622], "target": [14.681454720195, 50.808715847718]},
            {"source": [2416, 3598], "target": [14.703546131965, 50.856059148055]},
            {"source": [7395, 946], "target": [14.826504192996, 50.898265545769]},
            {"source": [946, 6862], "target": [14.666342263936, 50.805188342156]},
            {"source": [771, 7207], "target": [14.661734800546, 50.799776765214]},
            {"source": [7465, 7231], "target": [14.82938673407, 50.80059467845]},
            {"source": [788, 781], "target": [14.663646845572, 50.899831454076]},
            {"source": [7486, 818], "target": [14.829132122927, 50.900185560843]},
            {"source": [7484, 939], "target": [14.829138205432, 50.898323450806]},
            {"source": [7483, 1160], "target": [14.829145688426, 50.894908648825]},
            {"source": [7478, 2392], "target": [14.829196331602, 50.874764134307]},
            {"source": [7471, 3849], "target": [14.829253978805, 50.852910617897]},
            {"source": [7465, 6803], "target": [14.829363593315, 50.80734546335]},
            {"source": [7464, 5611], "target": [14.829323125954, 50.825911023952]},
            {"source": [7072, 816], "target": [14.818461581754, 50.900162259197]},
            {"source": [6816, 815], "target": [14.812297813421, 50.900151361887]},
            {"source": [6421, 813], "target": [14.802223053593, 50.900129107788]},
            {"source": [6618, 814], "target": [14.807439741575, 50.900140443422]},
            {"source": [6095, 811], "target": [14.79396136798, 50.900113591633]},
            {"source": [5696, 809], "target": [14.783920384473, 50.900090067859]},
            {"source": [4628, 802], "target": [14.75775378559, 50.900032966778]},
            {"source": [4315, 798], "target": [14.750505879687, 50.900016164954]},
            {"source": [4392, 801], "target": [14.752365899551, 50.900022902391]},
            {"source": [2144, 787], "target": [14.696740414531, 50.899902828324]},
            {"source": [2730, 789], "target": [14.711380112251, 50.899935584721]},
            {"source": [1454, 894], "target": [14.678838241912, 50.898270458088]},
            {"source": [2110, 787], "target": [14.695619330344, 50.899901154426]},
            {"source": [1729, 786], "target": [14.685688820994, 50.899880165294]},
            {"source": [788, 1240], "target": [14.663512309453, 50.892726856692]},
            {"source": [788, 910], "target": [14.663606153878, 50.897668380513]},
            {"source": [786, 2712], "target": [14.663059846595, 50.869356442866]},
            {"source": [782, 3878], "target": [14.662716360693, 50.851226910756]},
            {"source": [776, 4935], "target": [14.662403924156, 50.835015826507]},
            {"source": [775, 6249], "target": [14.66201809743, 50.814587799125]},
            {"source": [1129, 7208], "target": [14.671402656065, 50.799822388914]},
            {"source": [2847, 7216], "target": [14.71494617521, 50.80003532242]},
            {"source": [5029, 7222], "target": [14.769027444289, 50.800301490166]},
            {"source": [6878, 7228], "target": [14.814811178089, 50.800522857232]},
            {"source": [2344, 5329], "target": [14.702654426308, 50.828966502252]},
            {"source": [3227, 5703], "target": [14.724240369322, 50.823275953506]},
            {"source": [3401, 5702], "target": [14.728240875224, 50.823645316122]},
            {"source": [3564, 6419], "target": [14.732725721035, 50.812001813382]},
            {"source": [5055, 6582], "target": [14.769530816595, 50.809901028317]},
            {"source": [5040, 6641], "target": [14.769256299665, 50.808950066353]},
            {"source": [6587, 5689], "target": [14.807585452192, 50.824413387287]},
            {"source": [5454, 6101], "target": [14.779585654499, 50.817950250277]},
            {"source": [4307, 6647], "target": [14.751634272656, 50.808613014558]},
            {"source": [5574, 7223], "target": [14.782296084065, 50.800354683619]},
            {"source": [1354, 784], "target": [14.67634612815, 50.899859802211]},
            {"source": [2389, 787], "target": [14.701935480532, 50.899914589163]},
            {"source": [3824, 1662], "target": [14.738689286797, 50.886536375438]},
            {"source": [3224, 1988], "target": [14.724086779327, 50.881400957462]},
            {"source": [5561, 1866], "target": [14.781628702951, 50.883739028779]},
            {"source": [4983, 2643], "target": [14.767642016105, 50.871542857]},
            {"source": [4726, 2993], "target": [14.761426208635, 50.866146613586]},
            {"source": [1752, 2466], "target": [14.686777727172, 50.873739758153]},
            {"source": [2120, 3274], "target": [14.695887327077, 50.860745617059]},
            {"source": [6153, 3355], "target": [14.796487598134, 50.860512023302]},
            {"source": [2581, 6592], "target": [14.708445231744, 50.809621467831]},
            {"source": [3009, 3992], "target": [14.718511063861, 50.849750438399]},
            {"source": [7188, 7229], "target": [14.822605684397, 50.800558336973]},
            {"source": [4111, 3785], "target": [14.745949775376, 50.85370368877]},
            {"source": [4006, 3615], "target": [14.743331660827, 50.856337080476]},
            {"source": [3893, 3472], "target": [14.740705479905, 50.858508042521]},
            {"source": [3737, 4589], "target": [14.737042129051, 50.840928706352]},
            {"source": [5695, 4687], "target": [14.785700030341, 50.840037938729]},
            {"source": [3367, 793], "target": [14.727518573288, 50.899969586806]},
            {"source": [789, 1410], "target": [14.663452240739, 50.889766853181]},
            {"source": [783, 3619], "target": [14.662793178389, 50.855212017021]},
            {"source": [6387, 7226], "target": [14.802360083153, 50.800460327448]},
            {"source": [7467, 4470], "target": [14.829268312941, 50.843462199227]},
        ],
        "srcFile": os.path.join(PATH_TEST_INPUT_BASE, "df_dk_0010001_5154_1892.tif"),
        "srs": "EPSG:4314",
    },
    {
        "name": "Map: df_dk_0010002_0004.tif (9624,8837), Gcps: 4, Algorithm: Affine, Without clip polygon",
        "algorithm": "affine",
        "clip": None,
        "gcps": [
            {"source": [3195, 3986], "target": [14.42561262705, 51.183689473957]},
            {"source": [5223, 5048], "target": [14.668943094563, 51.101568233786]},
            {"source": [7907, 4149], "target": [14.994077170632, 51.159581323447]},
            {"source": [1665, 1321], "target": [14.246610357359, 51.387001187134]},
        ],
        "srcFile": os.path.join(PATH_TEST_INPUT_BASE, "df_dk_0010002_0004.tif"),
        "srs": "EPSG:4314",
    },
    {
        "name": "Map: df_dk_0010002_0004.tif (9624,8837), Gcps: 20, Algorithm: Polynom, Without clip polygon",
        "algorithm": "polynom",
        "clip": None,
        "gcps": [
            {"source": [3195, 3986], "target": [14.425612623442, 51.183689471521]},
            {"source": [5223, 5048], "target": [14.668943090803, 51.101568231318]},
            {"source": [7907, 4149], "target": [14.994077166404, 51.159581320741]},
            {"source": [1665, 1321], "target": [14.246610353649, 51.387001184551]},
            {"source": [1066, 1047], "target": [14.175884499064, 51.408678698035]},
            {"source": [1033, 7382], "target": [14.164487568014, 50.926844974102]},
            {"source": [7424, 6055], "target": [14.932199803967, 51.019574181517]},
            {"source": [6566, 5685], "target": [14.828911953001, 51.048388028077]},
            {"source": [7915, 6568], "target": [14.990833025557, 50.979407052335]},
            {"source": [7654, 1847], "target": [14.971861873241, 51.336974669044]},
            {"source": [6447, 2387], "target": [14.825617155189, 51.295987201865]},
            {"source": [6097, 1061], "target": [14.788533193496, 51.399713860947]},
            {"source": [2842, 7384], "target": [14.379821581008, 50.925120001999]},
            {"source": [2017, 6717], "target": [14.280181521541, 50.976381244353]},
            {"source": [3481, 6313], "target": [14.452862997387, 51.006070886406]},
            {"source": [4564, 7390], "target": [14.584001495473, 50.923495622454]},
            {"source": [5862, 7393], "target": [14.744912569212, 50.922164594838]},
            {"source": [5869, 6127], "target": [14.745651428538, 51.0169882168]},
            {"source": [8447, 2960], "target": [15.063407020674, 51.251012182362]},
            {"source": [8432, 5159], "target": [15.056776081041, 51.082331653744]},
            {"source": [8428, 5994], "target": [15.054328030997, 51.020028166673]},
        ],
        "srcFile": os.path.join(PATH_TEST_INPUT_BASE, "df_dk_0010002_0004.tif"),
        "srs": "EPSG:4314",
    },
    {
        "name": "Map: df_dk_0010002_0004.tif (9624,8837), Gcps: 20, Algorithm: tps, Without clip polygon",
        "algorithm": "tps",
        "clip": None,
        "gcps": [
            {"source": [3195, 3986], "target": [14.425612623442, 51.183689471521]},
            {"source": [5223, 5048], "target": [14.668943090803, 51.101568231318]},
            {"source": [7907, 4149], "target": [14.994077166404, 51.159581320741]},
            {"source": [1665, 1321], "target": [14.246610353649, 51.387001184551]},
            {"source": [1066, 1047], "target": [14.175884499064, 51.408678698035]},
            {"source": [1033, 7382], "target": [14.164487568014, 50.926844974102]},
            {"source": [7424, 6055], "target": [14.932199803967, 51.019574181517]},
            {"source": [6566, 5685], "target": [14.828911953001, 51.048388028077]},
            {"source": [7915, 6568], "target": [14.990833025557, 50.979407052335]},
            {"source": [7654, 1847], "target": [14.971861873241, 51.336974669044]},
            {"source": [6447, 2387], "target": [14.825617155189, 51.295987201865]},
            {"source": [6097, 1061], "target": [14.788533193496, 51.399713860947]},
            {"source": [2842, 7384], "target": [14.379821581008, 50.925120001999]},
            {"source": [2017, 6717], "target": [14.280181521541, 50.976381244353]},
            {"source": [3481, 6313], "target": [14.452862997387, 51.006070886406]},
            {"source": [4564, 7390], "target": [14.584001495473, 50.923495622454]},
            {"source": [5862, 7393], "target": [14.744912569212, 50.922164594838]},
            {"source": [5869, 6127], "target": [14.745651428538, 51.0169882168]},
            {"source": [8447, 2960], "target": [15.063407020674, 51.251012182362]},
            {"source": [8432, 5159], "target": [15.056776081041, 51.082331653744]},
            {"source": [8428, 5994], "target": [15.054328030997, 51.020028166673]},
        ],
        "srcFile": os.path.join(PATH_TEST_INPUT_BASE, "df_dk_0010002_0004.tif"),
        "srs": "EPSG:4314",
    },
    {
        "name": "Map: df_dk_0000310.tif (9515,9429), Gcps: 4, Algorithm: Affine, Without clip polygon",
        "algorithm": "affine",
        "clip": None,
        "gcps": [
            {"source": [4215, 4225], "target": [13.738989332862, 51.054729594906]},
            {"source": [5671, 7247], "target": [13.769041044263, 51.014073594726]},
            {"source": [3483, 2432], "target": [13.72439149141, 51.078816150987]},
            {"source": [5107, 3414], "target": [13.758749806377, 51.065411912287]},
        ],
        "srcFile": os.path.join(PATH_TEST_INPUT_BASE, "df_dk_0000310.tif"),
        "srs": "EPSG:4314",
    },
    {
        "name": "Map: df_dk_0000310.tif (9515,9429), Gcps: >60, Algorithm: TPS, Without clip polygon",
        "algorithm": "tps",
        "clip": None,
        "gcps": [
            {"source": [5494, 7092], "target": [13.767304118408, 51.012843412447]},
            {"source": [3352, 2256], "target": [13.722658749289, 51.077577984836]},
            {"source": [4972, 3252], "target": [13.757012482328, 51.064175771823]},
            {"source": [1025, 7440], "target": [13.672689198149, 51.008941746734]},
            {"source": [1563, 7069], "target": [13.683868645314, 51.014058399564]},
            {"source": [882, 7905], "target": [13.669964073795, 51.002798317601]},
            {"source": [8436, 8198], "target": [13.82927656037, 50.999132125548]},
            {"source": [7885, 1003], "target": [13.818547724251, 51.093779502957]},
            {"source": [1008, 783], "target": [13.673268555236, 51.097370834337]},
            {"source": [1002, 1801], "target": [13.672195671639, 51.083960875476]},
            {"source": [8525, 1986], "target": [13.832103608615, 51.080884122992]},
            {"source": [8506, 5277], "target": [13.831553755796, 51.037584021843]},
            {"source": [8605, 5935], "target": [13.833922146362, 51.028460298251]},
            {"source": [8114, 7743], "target": [13.822753428045, 51.004857469626]},
            {"source": [4075, 7787], "target": [13.737405537232, 51.003919047747]},
            {"source": [2233, 4813], "target": [13.698610066033, 51.043532282194]},
            {"source": [1016, 3003], "target": [13.672544358823, 51.067806484896]},
            {"source": [1035, 4119], "target": [13.672694562537, 51.052897515435]},
            {"source": [3667, 1062], "target": [13.728881476927, 51.09354029558]},
            {"source": [2937, 6211], "target": [13.713335393531, 51.024772515593]},
            {"source": [8699, 1191], "target": [13.835724590775, 51.091266078903]},
            {"source": [6273, 4221], "target": [13.784489034226, 51.05138005126]},
            {"source": [4831, 5502], "target": [13.753461240368, 51.034370935322]},
            {"source": [6442, 1969], "target": [13.787868617562, 51.081015554728]},
            {"source": [4067, 4057], "target": [13.737347423812, 51.05350954619]},
            {"source": [4258, 4176], "target": [13.741622418056, 51.051954165358]},
            {"source": [3895, 4096], "target": [13.733771592269, 51.052994463798]},
            {"source": [3975, 4002], "target": [13.735480606338, 51.054224413733]},
            {"source": [4470, 3356], "target": [13.746182620307, 51.062869390761]},
            {"source": [4804, 2258], "target": [13.753534108291, 51.077354705538]},
            {"source": [5722, 799], "target": [13.772601932178, 51.096509244434]},
            {"source": [4931, 2833], "target": [13.756143897663, 51.069755726474]},
            {"source": [3158, 3611], "target": [13.718196451446, 51.059494535251]},
            {"source": [3102, 3892], "target": [13.716972693746, 51.055786883555]},
            {"source": [3031, 3521], "target": [13.715525641983, 51.060737377168]},
            {"source": [3599, 4417], "target": [13.72745230783, 51.048755564945]},
            {"source": [4150, 4921], "target": [13.739173561225, 51.042136778876]},
            {"source": [5262, 5250], "target": [13.762846737991, 51.037854721518]},
            {"source": [8382, 3419], "target": [13.829073607703, 51.062097342622]},
            {"source": [6953, 4224], "target": [13.799080699573, 51.051411245061]},
            {"source": [6607, 4203], "target": [13.79171647126, 51.051590392602]},
            {"source": [8163, 7133], "target": [13.823752105018, 51.01283835281]},
            {"source": [6993, 7156], "target": [13.799076675932, 51.012401287807]},
            {"source": [1266, 4948], "target": [13.677367865821, 51.042033062983]},
            {"source": [2420, 1308], "target": [13.702612370143, 51.090240961253]},
            {"source": [844, 8302], "target": [13.669288605342, 50.997569855841]},
            {"source": [8735, 8315], "target": [13.835564553519, 50.997658478761]},
            {"source": [8703, 682], "target": [13.835751861225, 51.097937640504]},
            {"source": [3642, 5133], "target": [13.728389516418, 51.039270171623]},
            {"source": [4146, 4423], "target": [13.739192783614, 51.048731115119]},
            {"source": [4322, 5546], "target": [13.742641657482, 51.033805038916]},
            {"source": [6499, 7165], "target": [13.788948654692, 51.012165034738]},
            {"source": [4008, 6274], "target": [13.73602330641, 51.024144923212]},
            {"source": [3999, 6345], "target": [13.735759444507, 51.023062431283]},
            {"source": [5197, 4176], "target": [13.761586099754, 51.051898524751]},
            {"source": [6902, 3262], "target": [13.797688633094, 51.064075479497]},
            {"source": [6984, 3298], "target": [13.799472302089, 51.063679353189]},
            {"source": [6742, 3211], "target": [13.794237077018, 51.064814625268]},
            {"source": [5301, 8294], "target": [13.763510584395, 50.997609525169]},
            {"source": [6562, 8301], "target": [13.790476619979, 50.997631469889]},
            {"source": [3443, 8295], "target": [13.723898827811, 50.997597708777]},
            {"source": [2269, 8298], "target": [13.699051737349, 50.997582516268]},
            {"source": [838, 6355], "target": [13.669213950416, 51.02340428467]},
            {"source": [841, 7046], "target": [13.669246136924, 51.014333455228]},
            {"source": [831, 5101], "target": [13.669020384441, 51.040023627129]},
            {"source": [813, 671], "target": [13.668661415359, 51.098827839083]},
            {"source": [818, 1594], "target": [13.66874277548, 51.08667350595]},
            {"source": [820, 2570], "target": [13.668827712318, 51.073110452909]},
            {"source": [3993, 671], "target": [13.736055492918, 51.098485910531]},
            {"source": [7228, 677], "target": [13.804670870086, 51.098106922727]},
            {"source": [8709, 3405], "target": [13.835690170417, 51.062174042304]},
            {"source": [8715, 5446], "target": [13.835639655372, 51.035425123095]},
            {"source": [8718, 6072], "target": [13.835623562118, 51.026997705065]},
            {"source": [8728, 7420], "target": [13.835596293102, 51.009354374664]},
        ],
        "srcFile": os.path.join(PATH_TEST_INPUT_BASE, "df_dk_0000310.tif"),
        "srs": "EPSG:4314",
    },
    {
        "name": "Map: df_dz_0000636.tif (10678,9170), Gcps: >10, Algorithm: TPS, Without clip polygon",
        "algorithm": "tps",
        "clip": None,
        "gcps": [
            {"source": [5684, 5464], "target": [13.734548985958, 51.052199489057]},
            {"source": [5303, 5159], "target": [13.732971847057, 51.053811343032]},
            {"source": [6674, 6055], "target": [13.739202618599, 51.048746290875]},
            {"source": [7181, 4942], "target": [13.744371235371, 51.052051114741]},
            {"source": [6406, 5215], "target": [13.739446699619, 51.052094952657]},
            {"source": [5417, 3363], "target": [13.737410902977, 51.059772691986]},
            {"source": [4887, 6725], "target": [13.727463930845, 51.048747977069]},
            {"source": [8637, 4836], "target": [13.752852380276, 51.050445944031]},
            {"source": [4368, 5579], "target": [13.726759850979, 51.053548324666]},
            {"source": [6660, 5411], "target": [13.740439116955, 51.051086670104]},
            {"source": [3562, 4690], "target": [13.724217116833, 51.05792165391]},
            {"source": [2110, 4552], "target": [13.716446757317, 51.060433518255]},
        ],
        "srcFile": os.path.join(PATH_TEST_INPUT_BASE, "df_dz_0000636.tif"),
        "srs": "EPSG:4314",
    },
    {
        "name": "Map: df_dz_0000636.tif (10678,9170), Gcps: >10, Algorithm: Polynom, Without clip polygon",
        "algorithm": "polynom",
        "clip": None,
        "gcps": [
            {"source": [5684, 5464], "target": [13.734548985958, 51.052199489057]},
            {"source": [5303, 5159], "target": [13.732971847057, 51.053811343032]},
            {"source": [6674, 6055], "target": [13.739202618599, 51.048746290875]},
            {"source": [7181, 4942], "target": [13.744371235371, 51.052051114741]},
            {"source": [6406, 5215], "target": [13.739446699619, 51.052094952657]},
            {"source": [5417, 3363], "target": [13.737410902977, 51.059772691986]},
            {"source": [4887, 6725], "target": [13.727463930845, 51.048747977069]},
            {"source": [8637, 4836], "target": [13.752852380276, 51.050445944031]},
            {"source": [4368, 5579], "target": [13.726759850979, 51.053548324666]},
            {"source": [6660, 5411], "target": [13.740439116955, 51.051086670104]},
            {"source": [3562, 4690], "target": [13.724217116833, 51.05792165391]},
            {"source": [2110, 4552], "target": [13.716446757317, 51.060433518255]},
        ],
        "srcFile": os.path.join(PATH_TEST_INPUT_BASE, "df_dz_0000636.tif"),
        "srs": "EPSG:4314",
    },
]
